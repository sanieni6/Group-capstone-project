"use strict";(self.webpackChunkartwork_listing_app=self.webpackChunkartwork_listing_app||[]).push([[179],{717:(t,e,n)=>{const a=n.p+"img/logo.png",s=n.p+"img/menu.svg",i=n.p+"img/close.svg",r=document.querySelector(".header"),o=`\n      <div class="header__wrapper">\n        <h1 class='header__logo'><span>Art</span><img class='header__logo-img' src="${a}"\n            alt="art painting illustration"><span>ork</span></h1>\n        <nav class="header__nav">\n          <button class="header__nav-btn close">\n            <img class='btn-img btn-open' src="${s}" alt="menu button icon">\n            <img class='btn-img btn-close' src="${i}" alt="close button icon">\n          </button>\n          <ul class="header__nav-list close">\n            <li class="header__nav-item"><a class='header__nav-link active' href='#'>Artworks</a></li>\n            <li class="header__nav-item"><a class='header__nav-link' href='#'>Exhibitions</a></li>\n            <li class="header__nav-item"><a class='header__nav-link' href='#'>Shop</a></li>\n          </ul>\n        </nav>\n      </div>\n`,l=n.p+"img/like.svg",c=n.p+"img/unlike.svg",m=document.querySelector(".main"),d=async t=>{const e=await t.filter((t=>null!==t.image_id)).map((t=>`\n      <figure class="artworks__item" id="${t.id}">\n        <img class="artworks__item-img" src="https://www.artic.edu/iiif/2/${t.image_id}/full/843,/0/default.jpg" alt="${t.title}">\n        <figcaption class="artworks__item-caption">\n          <h2 class="artworks__item-title">${t.title}</h2>\n          <p class="artworks__item-author">${t.artist_display}</p>\n          <div class="artworks__item-interact">\n            <div class="artworks__item-interact-likes">\n              <button class="artworks__item-btn like-btn" data-like-btn="${t.id}">\n                <img class="like-img like-icon" src="${l}" alt="like"> <img class="unlike-img unlike-icon" src="${c}" alt="like"> \n              </button>\n              <span class='like-count'>${t.likes} ${t.likes>1?"likes":"like"}</span>\n            </div>\n            <button id ="comment-${t.id}"class="artworks__item-btn comment-btn">Comment</button>\n          </div>\n        </figcaption>\n     </figure>\n    `));m.insertAdjacentHTML("afterbegin",`<div class='artworks'><h1 class="artworks__title">Artworks<span class="artworks__count"></span></h1><div class="artworks__wrapper">${e.join("")}</div></div>`)},_=async t=>{let e="no data";const n=await fetch(t);return n.ok?(e=await n.json(),e):e},u=(t,e)=>{const n=t.length;e.textContent=`(${n})`},p=(t,e,n="")=>{t.innerHTML="",""===n?e():e(n)},k=n.p+"img/close_gray.svg",g=document.querySelector(".container"),h=async t=>{const e=t.term_titles.map((t=>`<li class='artworks__modal-card-terms-item'>${t}</li>`)).join(""),n=` \n    <div class="artworks__modal">\n        <div class="artworks__modal-wrapper">\n        <button class="artworks__modal-btn">\n        <img class="artworks__modal-btn-img" src="${k}" alt="close">\n        </button>\n        <div class="artworks__modal-card">\n        <img class="artworks__modal-card-img" src="https://www.artic.edu/iiif/2/${t.image_id}/full/843,/0/default.jpg" alt="${t.title}">\n        <div class="artworks__modal-card-details">\n            <h3 class="artworks__modal-card-title">${t.title}</h3>\n            <p class="artworks__modal-card-author">\n            <span>Author:</span>\n            ${t.artist_display}\n            </p>\n            <p class="artworks__modal-card-origin">\n            <span>Origin:</span>\n            ${t.place_of_origin}\n            </p>\n            <p class="artworks__modal-card-credit">\n            <span>Credit:</span>\n            ${t.credit_line}\n            </p>\n            <ul class="artworks__modal-card-terms">\n            ${e}\n            </ul>\n        </div>\n        <div class="artworks__modal-comments">\n            <h4 class="artworks__modal-comments-title">\n            Comments\n            <span class="artworks__modal-comments-count"></span>\n            :\n            </h4>\n            <ul class="artworks__modal-comments-list">\n            </ul>\n            <form class="artworks__modal-comments-add">\n            <input type="text" name="name" id="name" placeholder="Your name" required>\n            <textarea class="artworks__modal-comments-input" name="message" id="comment" cols="30" rows="4" maxlength="500" placeholder="Your insights..." required></textarea>\n            <input type="submit" id="submit-61073" class="artworks__modal-comments-btn" value="Comment">\n            </form>\n        </div>\n        </div>\n        </div>\n        </div>\n    `;g.insertAdjacentHTML("afterbegin",n)},v=async(t,e)=>{fetch(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}})},w=t=>{const e=`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/yf6dqoUrsU3EfHXvC1i4/comments?item_id=${t}`,n=document.querySelector(".artworks__modal-comments-list"),a=document.querySelector(".artworks__modal-comments-count");_(e).then((t=>{if("no data"===t){const t="No comments";n.innerHTML=`<li class="artworks__modal-comments-item">${t}</li>`}else{const e=t.map((t=>`<li class="artworks__modal-comments-item">${t.creation_date} ${t.username}: ${t.comment}</li>`)).join("");n.innerHTML=e}})).then((()=>{((t,e)=>{const n=t.length;1===n&&"No comments"===t[0].textContent?e.textContent="(0)":e.textContent=`(${n})`})(document.querySelectorAll(".artworks__modal-comments-item"),a)}))},f=()=>{document.querySelectorAll(".comment-btn").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.id.split("-")[1];_(`https://api.artic.edu/api/v1/artworks/${e}?fields=id,title,artist_display,place_of_origin,credit_line,term_titles,image_id`).then((t=>{((t,e="")=>{""===e?t():t(e)})(h,t.data)})).then((()=>{const t=document.querySelector(".artworks__modal"),n=document.querySelector(".container"),a=document.querySelector(".artworks__modal-btn"),s=document.querySelector(".artworks__modal-comments-add"),i=document.getElementById("name"),r=document.getElementById("comment");a.addEventListener("click",(()=>{n.removeChild(t)})),s.addEventListener("submit",(t=>{t.preventDefault(),((t,e,n)=>{v("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/yf6dqoUrsU3EfHXvC1i4/comments",{item_id:t,username:e,comment:n}).then((()=>{setTimeout((()=>{w(t)}),1e3)}))})(e,i.value,r.value),i.value="",r.value="",setTimeout((()=>{w(e)}),1e3)}))})).then((()=>{w(e)}))}))}))},y=document.querySelector(".main");r.insertAdjacentHTML("afterbegin",o);const b=document.querySelectorAll(".header__nav-link"),$=document.querySelector(".main");var S,q;q=t=>{t.forEach((t=>{t.classList.contains("active")&&t.classList.remove("active")}))},(S=b).forEach((t=>{t.addEventListener("click",(t=>{if("Artworks"===t.target.textContent){q(S),t.target.classList.add("active"),y.innerHTML="";const e="https://api.artic.edu/api/v1/artworks?limit=20&fields=id,title,artist_display,place_of_origin,credit_line,term_titles,image_id",n="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/yf6dqoUrsU3EfHXvC1i4/likes";Promise.all([_(e),_(n)]).then((([t,e])=>{const n=t.data.map((t=>{const n=e.find((e=>e.item_id===t.id.toString()));return{...t,likes:n?n.likes:0}}));p(y,d,n)})).then((()=>{const t=document.querySelector(".artworks__count"),e=document.querySelectorAll(".artworks__item");u(e,t),document.querySelectorAll(".artworks__item-btn").forEach((t=>{t.addEventListener("click",(t=>{if(t.target.classList.contains("unlike-icon")){const e=t.target.parentElement,a=e.nextElementSibling;let s=parseInt(a.textContent.split(" ")[0],10);e.classList.add("liked");const i={item_id:e.dataset.likeBtn};v(n,i).then((()=>{s+=1,a.textContent=s>1?`${s} Likes`:`${s} Like`}))}}))}))})).then((()=>{f()}))}else("Exhibitions"===t.target.textContent||"Shop"===t.target.textContent)&&(q(S),t.target.classList.add("active"),y.innerHTML="")}))}));const L="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/yf6dqoUrsU3EfHXvC1i4/likes";Promise.all([_("https://api.artic.edu/api/v1/artworks?limit=20&fields=id,title,artist_display,place_of_origin,credit_line,term_titles,image_id"),_(L)]).then((([t,e])=>{const n=t.data.map((t=>{const n=e.find((e=>e.item_id===t.id.toString()));return{...t,likes:n?n.likes:0}}));p($,d,n)})).then((()=>{const t=document.querySelector(".artworks__count"),e=document.querySelectorAll(".artworks__item");u(e,t),document.querySelectorAll(".artworks__item-btn").forEach((t=>{t.addEventListener("click",(t=>{if(t.target.classList.contains("unlike-icon")){const e=t.target.parentElement,n=e.nextElementSibling;let a=parseInt(n.textContent.split(" ")[0],10);e.classList.add("liked");const s={item_id:e.dataset.likeBtn};v(L,s).then((()=>{a+=1,n.textContent=a>1?`${a} Likes`:`${a} Like`}))}}))}))})).then((()=>{f()}))}},t=>{t(t.s=717)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2s6Ly9hcnR3b3JrLWxpc3RpbmctYXBwLy4vc3JjL2pzL21vZHVsZXMvcmVuZGVySGVhZGVyLmpzIiwid2VicGFjazovL2FydHdvcmstbGlzdGluZy1hcHAvLi9zcmMvanMvbW9kdWxlcy9hcnR3b3Jrcy5qcyIsIndlYnBhY2s6Ly9hcnR3b3JrLWxpc3RpbmctYXBwLy4vc3JjL2pzL21vZHVsZXMvdXRpbC9mZXRjaERhdGEuanMiLCJ3ZWJwYWNrOi8vYXJ0d29yay1saXN0aW5nLWFwcC8uL3NyYy9qcy9tb2R1bGVzL3V0aWwvY291bnRlci5qcyIsIndlYnBhY2s6Ly9hcnR3b3JrLWxpc3RpbmctYXBwLy4vc3JjL2pzL21vZHVsZXMvdXRpbC9wYWdlUmVuZGVyLmpzIiwid2VicGFjazovL2FydHdvcmstbGlzdGluZy1hcHAvLi9zcmMvanMvbW9kdWxlcy91dGlsL3JlbmRlclBvcHVwLmpzIiwid2VicGFjazovL2FydHdvcmstbGlzdGluZy1hcHAvLi9zcmMvanMvbW9kdWxlcy91dGlsL3Bvc3RBcGkuanMiLCJ3ZWJwYWNrOi8vYXJ0d29yay1saXN0aW5nLWFwcC8uL3NyYy9qcy9tb2R1bGVzL3V0aWwvZ2VuZXJhdGVDb21tZW50TGlzdC5qcyIsIndlYnBhY2s6Ly9hcnR3b3JrLWxpc3RpbmctYXBwLy4vc3JjL2pzL21vZHVsZXMvdXRpbC9jb21tZW50c0NvdW50ZXIuanMiLCJ3ZWJwYWNrOi8vYXJ0d29yay1saXN0aW5nLWFwcC8uL3NyYy9qcy9tb2R1bGVzL3V0aWwvZmV0Y2hQb3B1cC5qcyIsIndlYnBhY2s6Ly9hcnR3b3JrLWxpc3RpbmctYXBwLy4vc3JjL2pzL21vZHVsZXMvdXRpbC9uZXdDb21tZW50LmpzIiwid2VicGFjazovL2FydHdvcmstbGlzdGluZy1hcHAvLi9zcmMvanMvbW9kdWxlcy9wYWdlTmF2LmpzIiwid2VicGFjazovL2FydHdvcmstbGlzdGluZy1hcHAvLi9zcmMvanMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJ0d29yay1saXN0aW5nLWFwcC8uL3NyYy9qcy9tb2R1bGVzL3V0aWwvcmVtb3ZlQWN0aXZlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2dvSWNvbiBmcm9tICcuLi8uLi9pbWcvbG9nby5wbmcnO1xuaW1wb3J0IG1lbnVJY29uIGZyb20gJy4uLy4uL2ltZy9tZW51LnN2Zyc7XG5pbXBvcnQgY2xvc2VJY29uIGZyb20gJy4uLy4uL2ltZy9jbG9zZS5zdmcnO1xuXG5jb25zdCBwYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xuXG5jb25zdCBoZWFkZXIgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX193cmFwcGVyXCI+XG4gICAgICAgIDxoMSBjbGFzcz0naGVhZGVyX19sb2dvJz48c3Bhbj5BcnQ8L3NwYW4+PGltZyBjbGFzcz0naGVhZGVyX19sb2dvLWltZycgc3JjPVwiJHtsb2dvSWNvbn1cIlxuICAgICAgICAgICAgYWx0PVwiYXJ0IHBhaW50aW5nIGlsbHVzdHJhdGlvblwiPjxzcGFuPm9yazwvc3Bhbj48L2gxPlxuICAgICAgICA8bmF2IGNsYXNzPVwiaGVhZGVyX19uYXZcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiaGVhZGVyX19uYXYtYnRuIGNsb3NlXCI+XG4gICAgICAgICAgICA8aW1nIGNsYXNzPSdidG4taW1nIGJ0bi1vcGVuJyBzcmM9XCIke21lbnVJY29ufVwiIGFsdD1cIm1lbnUgYnV0dG9uIGljb25cIj5cbiAgICAgICAgICAgIDxpbWcgY2xhc3M9J2J0bi1pbWcgYnRuLWNsb3NlJyBzcmM9XCIke2Nsb3NlSWNvbn1cIiBhbHQ9XCJjbG9zZSBidXR0b24gaWNvblwiPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDx1bCBjbGFzcz1cImhlYWRlcl9fbmF2LWxpc3QgY2xvc2VcIj5cbiAgICAgICAgICAgIDxsaSBjbGFzcz1cImhlYWRlcl9fbmF2LWl0ZW1cIj48YSBjbGFzcz0naGVhZGVyX19uYXYtbGluayBhY3RpdmUnIGhyZWY9JyMnPkFydHdvcmtzPC9hPjwvbGk+XG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJoZWFkZXJfX25hdi1pdGVtXCI+PGEgY2xhc3M9J2hlYWRlcl9fbmF2LWxpbmsnIGhyZWY9JyMnPkV4aGliaXRpb25zPC9hPjwvbGk+XG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJoZWFkZXJfX25hdi1pdGVtXCI+PGEgY2xhc3M9J2hlYWRlcl9fbmF2LWxpbmsnIGhyZWY9JyMnPlNob3A8L2E+PC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICA8L25hdj5cbiAgICAgIDwvZGl2PlxuYDtcblxuY29uc3QgcmVuZGVySGVhZGVyID0gKCkgPT4ge1xuICBwYWdlQ29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGhlYWRlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJIZWFkZXI7XG4iLCJpbXBvcnQgbGlrZUljb24gZnJvbSAnLi4vLi4vaW1nL2xpa2Uuc3ZnJztcclxuaW1wb3J0IHVuTGlrZUljb24gZnJvbSAnLi4vLi4vaW1nL3VubGlrZS5zdmcnO1xyXG5cclxuY29uc3QgcGFnZU1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpO1xyXG5cclxuY29uc3QgYXJ0d29ya3MgPSBhc3luYyAoYXJ0d29ya3NBcnIpID0+IHtcclxuICAvLyBwYWdlIHRpdGxlIHNlY3Rpb25cclxuICBjb25zdCBwYWdlSGVhZGVyID0gJzxoMSBjbGFzcz1cImFydHdvcmtzX190aXRsZVwiPkFydHdvcmtzPHNwYW4gY2xhc3M9XCJhcnR3b3Jrc19fY291bnRcIj48L3NwYW4+PC9oMT4nO1xyXG5cclxuICAvLyBnZW5lcmF0ZSB0aGUgcGFnZSBjb250ZW50c1xyXG4gIGNvbnN0IGFydHdvcmtzSHRtbENvbnRlbnQgPSBhd2FpdCBhcnR3b3Jrc0Fyci5maWx0ZXIoKGFydHdvcmspID0+IGFydHdvcmsuaW1hZ2VfaWQgIT09IG51bGwpLm1hcCgoYXJ0d29yaykgPT4gYFxyXG4gICAgICA8ZmlndXJlIGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW1cIiBpZD1cIiR7YXJ0d29yay5pZH1cIj5cclxuICAgICAgICA8aW1nIGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW0taW1nXCIgc3JjPVwiaHR0cHM6Ly93d3cuYXJ0aWMuZWR1L2lpaWYvMi8ke2FydHdvcmsuaW1hZ2VfaWR9L2Z1bGwvODQzLC8wL2RlZmF1bHQuanBnXCIgYWx0PVwiJHthcnR3b3JrLnRpdGxlfVwiPlxyXG4gICAgICAgIDxmaWdjYXB0aW9uIGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW0tY2FwdGlvblwiPlxyXG4gICAgICAgICAgPGgyIGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW0tdGl0bGVcIj4ke2FydHdvcmsudGl0bGV9PC9oMj5cclxuICAgICAgICAgIDxwIGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW0tYXV0aG9yXCI+JHthcnR3b3JrLmFydGlzdF9kaXNwbGF5fTwvcD5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcnR3b3Jrc19faXRlbS1pbnRlcmFjdFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW0taW50ZXJhY3QtbGlrZXNcIj5cclxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYXJ0d29ya3NfX2l0ZW0tYnRuIGxpa2UtYnRuXCIgZGF0YS1saWtlLWJ0bj1cIiR7YXJ0d29yay5pZH1cIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJsaWtlLWltZyBsaWtlLWljb25cIiBzcmM9XCIke2xpa2VJY29ufVwiIGFsdD1cImxpa2VcIj4gPGltZyBjbGFzcz1cInVubGlrZS1pbWcgdW5saWtlLWljb25cIiBzcmM9XCIke3VuTGlrZUljb259XCIgYWx0PVwibGlrZVwiPiBcclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0nbGlrZS1jb3VudCc+JHthcnR3b3JrLmxpa2VzfSAke2FydHdvcmsubGlrZXMgPiAxID8gJ2xpa2VzJyA6ICdsaWtlJ308L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkID1cImNvbW1lbnQtJHthcnR3b3JrLmlkfVwiY2xhc3M9XCJhcnR3b3Jrc19faXRlbS1idG4gY29tbWVudC1idG5cIj5Db21tZW50PC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2ZpZ2NhcHRpb24+XHJcbiAgICAgPC9maWd1cmU+XHJcbiAgICBgKTtcclxuICBwYWdlTWFpbi5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBgPGRpdiBjbGFzcz0nYXJ0d29ya3MnPiR7cGFnZUhlYWRlcn08ZGl2IGNsYXNzPVwiYXJ0d29ya3NfX3dyYXBwZXJcIj4ke2FydHdvcmtzSHRtbENvbnRlbnQuam9pbignJyl9PC9kaXY+PC9kaXY+YCk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhcnR3b3JrcztcclxuIiwiY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKFVSTCkgPT4ge1xuICBsZXQgZGF0YSA9ICdubyBkYXRhJztcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChVUkwpO1xuICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHJldHVybiBkYXRhO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZmV0Y2hEYXRhO1xuIiwiY29uc3QgY291bnRlciA9ICh0YXJnZXQsIG91dHB1dCkgPT4ge1xuICBjb25zdCBjb3VudCA9IHRhcmdldC5sZW5ndGg7XG4gIG91dHB1dC50ZXh0Q29udGVudCA9IGAoJHtjb3VudH0pYDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvdW50ZXI7IiwiY29uc3QgcGFnZVJlbmRlciA9IChsb2NhdGlvbiwgcGFnZSwgY29udGVudCA9ICcnKSA9PiB7XG4gIGxvY2F0aW9uLmlubmVySFRNTCA9ICcnO1xuICBpZiAoY29udGVudCA9PT0gJycpIHtcbiAgICBwYWdlKCk7XG4gIH0gZWxzZSB7XG4gICAgcGFnZShjb250ZW50KTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgcGFnZVJlbmRlcjsiLCJpbXBvcnQgY2xvc2VJY29uIGZyb20gJy4uLy4uLy4uL2ltZy9jbG9zZV9ncmF5LnN2Zyc7XG5cbmNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG5jb25zdCByZW5kZXJQb3B1cCA9IGFzeW5jIChkYXRhKSA9PiB7XG4gIGNvbnN0IHJlbmRlcmVkTGlzdCA9IGRhdGEudGVybV90aXRsZXMubWFwKCh0ZXJtKSA9PiBgPGxpIGNsYXNzPSdhcnR3b3Jrc19fbW9kYWwtY2FyZC10ZXJtcy1pdGVtJz4ke3Rlcm19PC9saT5gKS5qb2luKCcnKTtcbiAgY29uc3QgcG9wdXAgPSBgIFxuICAgIDxkaXYgY2xhc3M9XCJhcnR3b3Jrc19fbW9kYWxcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFydHdvcmtzX19tb2RhbC13cmFwcGVyXCI+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJhcnR3b3Jrc19fbW9kYWwtYnRuXCI+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJhcnR3b3Jrc19fbW9kYWwtYnRuLWltZ1wiIHNyYz1cIiR7Y2xvc2VJY29ufVwiIGFsdD1cImNsb3NlXCI+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYXJ0d29ya3NfX21vZGFsLWNhcmRcIj5cbiAgICAgICAgPGltZyBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jYXJkLWltZ1wiIHNyYz1cImh0dHBzOi8vd3d3LmFydGljLmVkdS9paWlmLzIvJHtkYXRhLmltYWdlX2lkfS9mdWxsLzg0MywvMC9kZWZhdWx0LmpwZ1wiIGFsdD1cIiR7ZGF0YS50aXRsZX1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jYXJkLWRldGFpbHNcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jYXJkLXRpdGxlXCI+JHtkYXRhLnRpdGxlfTwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jYXJkLWF1dGhvclwiPlxuICAgICAgICAgICAgPHNwYW4+QXV0aG9yOjwvc3Bhbj5cbiAgICAgICAgICAgICR7ZGF0YS5hcnRpc3RfZGlzcGxheX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiYXJ0d29ya3NfX21vZGFsLWNhcmQtb3JpZ2luXCI+XG4gICAgICAgICAgICA8c3Bhbj5PcmlnaW46PC9zcGFuPlxuICAgICAgICAgICAgJHtkYXRhLnBsYWNlX29mX29yaWdpbn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiYXJ0d29ya3NfX21vZGFsLWNhcmQtY3JlZGl0XCI+XG4gICAgICAgICAgICA8c3Bhbj5DcmVkaXQ6PC9zcGFuPlxuICAgICAgICAgICAgJHtkYXRhLmNyZWRpdF9saW5lfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwiYXJ0d29ya3NfX21vZGFsLWNhcmQtdGVybXNcIj5cbiAgICAgICAgICAgICR7cmVuZGVyZWRMaXN0fVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJhcnR3b3Jrc19fbW9kYWwtY29tbWVudHNcIj5cbiAgICAgICAgICAgIDxoNCBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jb21tZW50cy10aXRsZVwiPlxuICAgICAgICAgICAgQ29tbWVudHNcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYXJ0d29ya3NfX21vZGFsLWNvbW1lbnRzLWNvdW50XCI+PC9zcGFuPlxuICAgICAgICAgICAgOlxuICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgIDx1bCBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jb21tZW50cy1saXN0XCI+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgPGZvcm0gY2xhc3M9XCJhcnR3b3Jrc19fbW9kYWwtY29tbWVudHMtYWRkXCI+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwibmFtZVwiIGlkPVwibmFtZVwiIHBsYWNlaG9sZGVyPVwiWW91ciBuYW1lXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJhcnR3b3Jrc19fbW9kYWwtY29tbWVudHMtaW5wdXRcIiBuYW1lPVwibWVzc2FnZVwiIGlkPVwiY29tbWVudFwiIGNvbHM9XCIzMFwiIHJvd3M9XCI0XCIgbWF4bGVuZ3RoPVwiNTAwXCIgcGxhY2Vob2xkZXI9XCJZb3VyIGluc2lnaHRzLi4uXCIgcmVxdWlyZWQ+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgaWQ9XCJzdWJtaXQtNjEwNzNcIiBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jb21tZW50cy1idG5cIiB2YWx1ZT1cIkNvbW1lbnRcIj5cbiAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgYDtcbiAgbWFpbkNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBwb3B1cCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZW5kZXJQb3B1cDsiLCJjb25zdCBwb3N0QXBpID0gYXN5bmMgKFVSTCwgZGF0YSkgPT4ge1xuICBmZXRjaChVUkwsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnLFxuICAgIH0sXG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcG9zdEFwaTsiLCJpbXBvcnQgZmV0Y2hEYXRhIGZyb20gJy4vZmV0Y2hEYXRhLmpzJztcbmltcG9ydCBjb21tZW50c0NvdW50ZXIgZnJvbSAnLi9jb21tZW50c0NvdW50ZXIuanMnO1xuXG5jb25zdCByZW5kZXJDb21tZW50TGlzdCA9IChpZCkgPT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly91cy1jZW50cmFsMS1pbnZvbHZlbWVudC1hcGkuY2xvdWRmdW5jdGlvbnMubmV0L2NhcHN0b25lQXBpL2FwcHMveWY2ZHFvVXJzVTNFZkhYdkMxaTQvY29tbWVudHM/aXRlbV9pZD0ke2lkfWA7XG4gIGNvbnN0IHVsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnR3b3Jrc19fbW9kYWwtY29tbWVudHMtbGlzdCcpO1xuICBjb25zdCBjb21tZW50Q291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnR3b3Jrc19fbW9kYWwtY29tbWVudHMtY291bnQnKTtcbiAgZmV0Y2hEYXRhKHVybCkudGhlbigoZGF0YSkgPT4ge1xuICAgIGlmIChkYXRhID09PSAnbm8gZGF0YScpIHtcbiAgICAgIGNvbnN0IG5vQ29tbWVudCA9ICdObyBjb21tZW50cyc7XG4gICAgICB1bEVsZW1lbnQuaW5uZXJIVE1MID0gYDxsaSBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jb21tZW50cy1pdGVtXCI+JHtub0NvbW1lbnR9PC9saT5gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZW5kZXJlZExpc3QgPSBkYXRhLm1hcCgoY29tbWVudCkgPT4gYDxsaSBjbGFzcz1cImFydHdvcmtzX19tb2RhbC1jb21tZW50cy1pdGVtXCI+JHtjb21tZW50LmNyZWF0aW9uX2RhdGV9ICR7Y29tbWVudC51c2VybmFtZX06ICR7Y29tbWVudC5jb21tZW50fTwvbGk+YCkuam9pbignJyk7XG4gICAgICB1bEVsZW1lbnQuaW5uZXJIVE1MID0gcmVuZGVyZWRMaXN0O1xuICAgIH1cbiAgfSkudGhlbigoKSA9PiB7XG4gICAgY29uc3QgbGlFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcnR3b3Jrc19fbW9kYWwtY29tbWVudHMtaXRlbScpO1xuICAgIGNvbW1lbnRzQ291bnRlcihsaUVsZW1lbnRzLCBjb21tZW50Q291bnRlcik7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyQ29tbWVudExpc3Q7IiwiY29uc3QgY29tbWVudHNDb3VudGVyID0gKHRhcmdldCwgb3V0cHV0KSA9PiB7XG4gIGNvbnN0IGNvdW50ID0gdGFyZ2V0Lmxlbmd0aDtcbiAgaWYgKGNvdW50ID09PSAxICYmIHRhcmdldFswXS50ZXh0Q29udGVudCA9PT0gJ05vIGNvbW1lbnRzJykge1xuICAgIG91dHB1dC50ZXh0Q29udGVudCA9ICcoMCknO1xuICB9IGVsc2Uge1xuICAgIG91dHB1dC50ZXh0Q29udGVudCA9IGAoJHtjb3VudH0pYDtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWVudHNDb3VudGVyOyIsImltcG9ydCBmZXRjaERhdGEgZnJvbSAnLi9mZXRjaERhdGEuanMnO1xuaW1wb3J0IHJlbmRlclBvcHVwIGZyb20gJy4vcmVuZGVyUG9wdXAuanMnO1xuaW1wb3J0IG5ld0NvbW1lbnQgZnJvbSAnLi9uZXdDb21tZW50LmpzJztcbmltcG9ydCByZW5kZXJDb21tZW50TGlzdCBmcm9tICcuL2dlbmVyYXRlQ29tbWVudExpc3QuanMnO1xuXG5jb25zdCByZW5kZXJNb2RhbCA9IChtb2RhbCwgY29udGVudCA9ICcnKSA9PiB7XG4gIGlmIChjb250ZW50ID09PSAnJykge1xuICAgIG1vZGFsKCk7XG4gIH0gZWxzZSB7XG4gICAgbW9kYWwoY29udGVudCk7XG4gIH1cbn07XG5cbmNvbnN0IGZldGNoUG9wdXAgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbW1lbnRCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbW1lbnQtYnRuJyk7XG4gIGNvbW1lbnRCdG5zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LmlkLnNwbGl0KCctJylbMV07XG4gICAgICBjb25zdCBVUkwgPSBgaHR0cHM6Ly9hcGkuYXJ0aWMuZWR1L2FwaS92MS9hcnR3b3Jrcy8ke2lkfT9maWVsZHM9aWQsdGl0bGUsYXJ0aXN0X2Rpc3BsYXkscGxhY2Vfb2Zfb3JpZ2luLGNyZWRpdF9saW5lLHRlcm1fdGl0bGVzLGltYWdlX2lkYDtcbiAgICAgIGZldGNoRGF0YShVUkwpLnRoZW4oKGFydHdvcmspID0+IHtcbiAgICAgICAgcmVuZGVyTW9kYWwocmVuZGVyUG9wdXAsIGFydHdvcmsuZGF0YSk7XG4gICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc3QgZGlzcGxheWVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydHdvcmtzX19tb2RhbCcpO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydHdvcmtzX19tb2RhbC1idG4nKTtcbiAgICAgICAgY29uc3QgZm9ybVN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnR3b3Jrc19fbW9kYWwtY29tbWVudHMtYWRkJyk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnQnKTtcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGRpc3BsYXllZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3JtU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgbmV3Q29tbWVudChpZCwgbmFtZS52YWx1ZSwgbWVzc2FnZS52YWx1ZSk7XG4gICAgICAgICAgbmFtZS52YWx1ZSA9ICcnO1xuICAgICAgICAgIG1lc3NhZ2UudmFsdWUgPSAnJztcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlckNvbW1lbnRMaXN0KGlkKTtcbiAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgcmVuZGVyQ29tbWVudExpc3QoaWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZmV0Y2hQb3B1cDsiLCJpbXBvcnQgcG9zdEFwaSBmcm9tICcuL3Bvc3RBcGkuanMnO1xuaW1wb3J0IHJlbmRlckNvbW1lbnRMaXN0IGZyb20gJy4vZ2VuZXJhdGVDb21tZW50TGlzdC5qcyc7XG5cbmNvbnN0IHVybCA9ICdodHRwczovL3VzLWNlbnRyYWwxLWludm9sdmVtZW50LWFwaS5jbG91ZGZ1bmN0aW9ucy5uZXQvY2Fwc3RvbmVBcGkvYXBwcy95ZjZkcW9VcnNVM0VmSFh2QzFpNC9jb21tZW50cyc7XG5cbmNvbnN0IG5ld0NvbW1lbnQgPSAoaWQsIG5hbWUsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3QgY29tbWVudCA9IHtcbiAgICBpdGVtX2lkOiBpZCxcbiAgICB1c2VybmFtZTogbmFtZSxcbiAgICBjb21tZW50OiBtZXNzYWdlLFxuICB9O1xuICBwb3N0QXBpKHVybCwgY29tbWVudCkudGhlbigoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZW5kZXJDb21tZW50TGlzdChpZCk7XG4gICAgfSwgMTAwMCk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbmV3Q29tbWVudDsiLCJpbXBvcnQgYXJ0d29ya3MgZnJvbSAnLi9hcnR3b3Jrcy5qcyc7XHJcbmltcG9ydCBmZXRjaERhdGEgZnJvbSAnLi91dGlsL2ZldGNoRGF0YS5qcyc7XHJcbmltcG9ydCBjb3VudGVyIGZyb20gJy4vdXRpbC9jb3VudGVyLmpzJztcclxuaW1wb3J0IHBhZ2VSZW5kZXIgZnJvbSAnLi91dGlsL3BhZ2VSZW5kZXIuanMnO1xyXG5pbXBvcnQgZmV0Y2hQb3B1cCBmcm9tICcuL3V0aWwvZmV0Y2hQb3B1cC5qcyc7XHJcbmltcG9ydCBwb3N0QXBpIGZyb20gJy4vdXRpbC9wb3N0QXBpLmpzJztcclxuXHJcbi8vIGdldCB0aGUgbWFpbiBlbGVtZW50IGZyb20gdGhlIGRvbVxyXG5jb25zdCBwYWdlTWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XHJcblxyXG5jb25zdCBwYWdlTmF2ID0gKG5hdkl0ZW1zLCByZW1vdmVDbGFzcykgPT4ge1xyXG4gIG5hdkl0ZW1zLmZvckVhY2goKHRhYikgPT4ge1xyXG4gICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT09ICdBcnR3b3JrcycpIHtcclxuICAgICAgICAvLyBjYWxsIHRoZSByZW1vdmUgY2xhc3MgZnVuY3Rpb25cclxuICAgICAgICByZW1vdmVDbGFzcyhuYXZJdGVtcyk7XHJcblxyXG4gICAgICAgIC8vIGFkZCBhY3RpdmUgY2xhc3MgdG8gdGFyZ2V0XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAvLyBjbGVhciB0aGUgY29udGVudCBvZiB0aGUgbWFpblxyXG4gICAgICAgIHBhZ2VNYWluLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAvLyBkZWZpbmUgdGhlIGFwaSB1cmxzXHJcbiAgICAgICAgY29uc3QgVVJMX0FSVFdPUktTID0gJ2h0dHBzOi8vYXBpLmFydGljLmVkdS9hcGkvdjEvYXJ0d29ya3M/bGltaXQ9MjAmZmllbGRzPWlkLHRpdGxlLGFydGlzdF9kaXNwbGF5LHBsYWNlX29mX29yaWdpbixjcmVkaXRfbGluZSx0ZXJtX3RpdGxlcyxpbWFnZV9pZCc7XHJcbiAgICAgICAgY29uc3QgVVJMX0xJS0VTID0gJ2h0dHBzOi8vdXMtY2VudHJhbDEtaW52b2x2ZW1lbnQtYXBpLmNsb3VkZnVuY3Rpb25zLm5ldC9jYXBzdG9uZUFwaS9hcHBzL3lmNmRxb1Vyc1UzRWZIWHZDMWk0L2xpa2VzJztcclxuXHJcbiAgICAgICAgLy8gY2FsbCBkYXRhIGZyb20gYXJ0d29yayBhcGkgYW5kIHJlbmRlciBvbiBwYWdlXHJcbiAgICAgICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgZmV0Y2hEYXRhKFVSTF9BUlRXT1JLUyksXHJcbiAgICAgICAgICBmZXRjaERhdGEoVVJMX0xJS0VTKSxcclxuICAgICAgICBdKS50aGVuKChbYXJ0d29ya3NEYXRhLCBsaWtlc0RhdGFdKSA9PiB7XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGFydHdvcmtzIGRhdGEgYXJyYXlcclxuICAgICAgICAgIGNvbnN0IGFydHdvcmtzQXJyID0gYXJ0d29ya3NEYXRhLmRhdGE7XHJcblxyXG4gICAgICAgICAgLy8gY29tYmluZWQgbGlrZXMgb2JqZWN0cyBpbmZvcm1hdGlvbiB3aXRoIHRoZSBhcnR3b3JrcyBvYmplY3QgaW5mb3JtYXRpb25cclxuICAgICAgICAgIGNvbnN0IGFydHdvcmtzQW5kTGlrZXMgPSBhcnR3b3Jrc0Fyci5tYXAoKGFydHdvcmspID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGlrZXNPYmogPSBsaWtlc0RhdGEuZmluZCgobGlrZSkgPT4gbGlrZS5pdGVtX2lkID09PSBhcnR3b3JrLmlkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIC4uLmFydHdvcmssXHJcbiAgICAgICAgICAgICAgbGlrZXM6IGxpa2VzT2JqID8gbGlrZXNPYmoubGlrZXMgOiAwLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICAvLyByZW5kZXIgY29udGVudCBvbiBwYWdlXHJcbiAgICAgICAgICBwYWdlUmVuZGVyKHBhZ2VNYWluLCBhcnR3b3JrcywgYXJ0d29ya3NBbmRMaWtlcyk7XHJcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGNvdW50IGVsZW1lbnRcclxuICAgICAgICAgIGNvbnN0IGFydHdvcmtzQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0d29ya3NfX2NvdW50Jyk7XHJcblxyXG4gICAgICAgICAgLy8gZ2V0IHRoZSBhcnR3b3JrIGNhcmQgZWxlbWVudHNcclxuICAgICAgICAgIGNvbnN0IGFydHdvcmtDb2xsZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFydHdvcmtzX19pdGVtJyk7XHJcblxyXG4gICAgICAgICAgLy8gY2FsbCB0aGUgY291bnQgZnVuY3Rpb25cclxuICAgICAgICAgIGNvdW50ZXIoYXJ0d29ya0NvbGxlY3Rpb24sIGFydHdvcmtzQ291bnQpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGxpa2VCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFydHdvcmtzX19pdGVtLWJ0bicpO1xyXG5cclxuICAgICAgICAgIGxpa2VCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXIgdG8gcGFnZVxyXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3VubGlrZS1pY29uJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgbGlrZSBidXR0b25cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpa2VCdG4gPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgbGlrZXMgY291bnRlciBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaWtlQ291bnRlciA9IGxpa2VCdG4ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgY3VycmVudCBsaWtlcyBjb3VudHNcclxuICAgICAgICAgICAgICAgIGxldCBsaWtlc0NvdW50ID0gcGFyc2VJbnQobGlrZUNvdW50ZXIudGV4dENvbnRlbnQuc3BsaXQoJyAnKVswXSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgY2xpY2sgbGlrZWQgb3QgdGhlIGJ0blxyXG4gICAgICAgICAgICAgICAgbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKCdsaWtlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBvYmplY3QgdmFyaWFibGVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpa2VkSXRlbURhdGEgPSB7IGl0ZW1faWQ6IGxpa2VCdG4uZGF0YXNldC5saWtlQnRuIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2FsbCB0aGUgcG9zdEFwaSB0byB1cGRhdGUgdGhlIGxpa2UgY291bnRcclxuICAgICAgICAgICAgICAgIHBvc3RBcGkoVVJMX0xJS0VTLCBsaWtlZEl0ZW1EYXRhKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBsaWtlIGNvdW50IGJ5IDFcclxuICAgICAgICAgICAgICAgICAgbGlrZXNDb3VudCArPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBsaWtlIGNvdW50IG9uIHRoZSBzY3JlZW5cclxuICAgICAgICAgICAgICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBsaWtlc0NvdW50ID4gMSA/IGAke2xpa2VzQ291bnR9IExpa2VzYCA6IGAke2xpa2VzQ291bnR9IExpa2VgO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgLy8gYWRkIHJlbmRlciBjb21tZW50IHBvcC11cCBoZXJlXHJcbiAgICAgICAgICBmZXRjaFBvcHVwKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LnRleHRDb250ZW50ID09PSAnRXhoaWJpdGlvbnMnKSB7XHJcbiAgICAgICAgLy8gY2FsbCB0aGUgcmVtb3ZlIGNsYXNzIGZ1bmN0aW9uXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3MobmF2SXRlbXMpO1xyXG5cclxuICAgICAgICAvLyBhZGQgYWN0aXZlIGNsYXNzIHRvIHRhcmdldFxyXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgLy8gY2xlYXIgdGhlIGNvbnRlbnQgb2YgdGhlIG1haW5cclxuICAgICAgICBwYWdlTWFpbi5pbm5lckhUTUwgPSAnJztcclxuICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQudGV4dENvbnRlbnQgPT09ICdTaG9wJykge1xyXG4gICAgICAgIC8vIGNhbGwgdGhlIHJlbW92ZSBjbGFzcyBmdW5jdGlvblxyXG4gICAgICAgIHJlbW92ZUNsYXNzKG5hdkl0ZW1zKTtcclxuXHJcbiAgICAgICAgLy8gYWRkIGFjdGl2ZSBjbGFzcyB0byB0YXJnZXRcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIC8vIGNsZWFyIHRoZSBjb250ZW50IG9mIHRoZSBtYWluXHJcbiAgICAgICAgcGFnZU1haW4uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcGFnZU5hdjtcclxuIiwiaW1wb3J0ICdyZXNldC1jc3MnO1xyXG5pbXBvcnQgJy4uL3Njc3Mvc3R5bGVzLnNjc3MnO1xyXG5pbXBvcnQgcmVuZGVySGVhZGVyIGZyb20gJy4vbW9kdWxlcy9yZW5kZXJIZWFkZXIuanMnO1xyXG5pbXBvcnQgcmVtb3ZlQWN0aXZlIGZyb20gJy4vbW9kdWxlcy91dGlsL3JlbW92ZUFjdGl2ZS5qcyc7XHJcbmltcG9ydCBwYWdlTmF2IGZyb20gJy4vbW9kdWxlcy9wYWdlTmF2LmpzJztcclxuaW1wb3J0IHBhZ2VSZW5kZXIgZnJvbSAnLi9tb2R1bGVzL3V0aWwvcGFnZVJlbmRlci5qcyc7XHJcbmltcG9ydCBjb3VudGVyIGZyb20gJy4vbW9kdWxlcy91dGlsL2NvdW50ZXIuanMnO1xyXG5pbXBvcnQgZmV0Y2hEYXRhIGZyb20gJy4vbW9kdWxlcy91dGlsL2ZldGNoRGF0YS5qcyc7XHJcbmltcG9ydCBhcnR3b3JrcyBmcm9tICcuL21vZHVsZXMvYXJ0d29ya3MuanMnO1xyXG5pbXBvcnQgZmV0Y2hQb3B1cCBmcm9tICcuL21vZHVsZXMvdXRpbC9mZXRjaFBvcHVwLmpzJztcclxuaW1wb3J0IHBvc3RBcGkgZnJvbSAnLi9tb2R1bGVzL3V0aWwvcG9zdEFwaS5qcyc7XHJcblxyXG4vLyByZW5kZXIgdGhlIGhlYWRlciBzZWN0aW9uXHJcbnJlbmRlckhlYWRlcigpO1xyXG5cclxuLy8gZ2V0IHRoZSBuYXYgaXRlbXMgZnJvbSB0aGUgbG9hZGVkIGRvbSBlbGVtZW50c1xyXG5jb25zdCB0YWJsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fbmF2LWxpbmsnKTtcclxuXHJcbi8vIGdldCB0aGUgbWFpbiBlbGVtZW50IGZyb20gdGhlIGRvbVxyXG5jb25zdCBwYWdlTWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XHJcblxyXG4vLyBhZGQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIG5hdiB0YWJcclxucGFnZU5hdih0YWJsaXN0LCByZW1vdmVBY3RpdmUpO1xyXG5cclxuLy8gZGVmaW5lIHRoZSBhcGkgdXJsc1xyXG5jb25zdCBVUkxfQVJUV09SS1MgPSAnaHR0cHM6Ly9hcGkuYXJ0aWMuZWR1L2FwaS92MS9hcnR3b3Jrcz9saW1pdD0yMCZmaWVsZHM9aWQsdGl0bGUsYXJ0aXN0X2Rpc3BsYXkscGxhY2Vfb2Zfb3JpZ2luLGNyZWRpdF9saW5lLHRlcm1fdGl0bGVzLGltYWdlX2lkJztcclxuY29uc3QgVVJMX0xJS0VTID0gJ2h0dHBzOi8vdXMtY2VudHJhbDEtaW52b2x2ZW1lbnQtYXBpLmNsb3VkZnVuY3Rpb25zLm5ldC9jYXBzdG9uZUFwaS9hcHBzL3lmNmRxb1Vyc1UzRWZIWHZDMWk0L2xpa2VzJztcclxuXHJcbi8vIGNhbGwgZGF0YSBmcm9tIGFydHdvcmsgYXBpIGFuZCByZW5kZXIgb24gcGFnZVxyXG5Qcm9taXNlLmFsbChbXHJcbiAgZmV0Y2hEYXRhKFVSTF9BUlRXT1JLUyksXHJcbiAgZmV0Y2hEYXRhKFVSTF9MSUtFUyksXHJcbl0pLnRoZW4oKFthcnR3b3Jrc0RhdGEsIGxpa2VzRGF0YV0pID0+IHtcclxuICAvLyBnZXQgdGhlIGFydHdvcmtzIGRhdGEgYXJyYXlcclxuICBjb25zdCBhcnR3b3Jrc0FyciA9IGFydHdvcmtzRGF0YS5kYXRhO1xyXG5cclxuICAvLyBjb21iaW5lZCBsaWtlcyBvYmplY3RzIGluZm9ybWF0aW9uIHdpdGggdGhlIGFydHdvcmtzIG9iamVjdCBpbmZvcm1hdGlvblxyXG4gIGNvbnN0IGFydHdvcmtzQW5kTGlrZXMgPSBhcnR3b3Jrc0Fyci5tYXAoKGFydHdvcmspID0+IHtcclxuICAgIGNvbnN0IGxpa2VzT2JqID0gbGlrZXNEYXRhLmZpbmQoKGxpa2UpID0+IGxpa2UuaXRlbV9pZCA9PT0gYXJ0d29yay5pZC50b1N0cmluZygpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLmFydHdvcmssXHJcbiAgICAgIGxpa2VzOiBsaWtlc09iaiA/IGxpa2VzT2JqLmxpa2VzIDogMCxcclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIC8vIHJlbmRlciBjb250ZW50IG9uIHBhZ2VcclxuICBwYWdlUmVuZGVyKHBhZ2VNYWluLCBhcnR3b3JrcywgYXJ0d29ya3NBbmRMaWtlcyk7XHJcbn0pLnRoZW4oKCkgPT4ge1xyXG4gIC8vIGdldCB0aGUgY291bnQgZWxlbWVudFxyXG4gIGNvbnN0IGFydHdvcmtzQ291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0d29ya3NfX2NvdW50Jyk7XHJcblxyXG4gIC8vIGdldCB0aGUgYXJ0d29yayBjYXJkIGVsZW1lbnRzXHJcbiAgY29uc3QgYXJ0d29ya0NvbGxlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXJ0d29ya3NfX2l0ZW0nKTtcclxuXHJcbiAgLy8gY2FsbCB0aGUgY291bnQgZnVuY3Rpb25cclxuICBjb3VudGVyKGFydHdvcmtDb2xsZWN0aW9uLCBhcnR3b3Jrc0NvdW50KTtcclxuXHJcbiAgY29uc3QgbGlrZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXJ0d29ya3NfX2l0ZW0tYnRuJyk7XHJcblxyXG4gIGxpa2VCdG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyIHRvIHBhZ2VcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3VubGlrZS1pY29uJykpIHtcclxuICAgICAgICAvLyBnZXQgdGhlIGxpa2UgYnV0dG9uXHJcbiAgICAgICAgY29uc3QgbGlrZUJ0biA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIC8vIGdldCB0aGUgbGlrZXMgY291bnRlciBlbGVtZW50XHJcbiAgICAgICAgY29uc3QgbGlrZUNvdW50ZXIgPSBsaWtlQnRuLm5leHRFbGVtZW50U2libGluZztcclxuXHJcbiAgICAgICAgLy8gZ2V0IHRoZSBjdXJyZW50IGxpa2VzIGNvdW50c1xyXG4gICAgICAgIGxldCBsaWtlc0NvdW50ID0gcGFyc2VJbnQobGlrZUNvdW50ZXIudGV4dENvbnRlbnQuc3BsaXQoJyAnKVswXSwgMTApO1xyXG5cclxuICAgICAgICAvLyBhZGQgdGhlIGNsaWNrIGxpa2VkIG90IHRoZSBidG5cclxuICAgICAgICBsaWtlQnRuLmNsYXNzTGlzdC5hZGQoJ2xpa2VkJyk7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBhbiBvYmplY3QgdmFyaWFibGVcclxuICAgICAgICBjb25zdCBsaWtlZEl0ZW1EYXRhID0geyBpdGVtX2lkOiBsaWtlQnRuLmRhdGFzZXQubGlrZUJ0biB9O1xyXG5cclxuICAgICAgICAvLyBjYWxsIHRoZSBwb3N0QXBpIHRvIHVwZGF0ZSB0aGUgbGlrZSBjb3VudFxyXG4gICAgICAgIHBvc3RBcGkoVVJMX0xJS0VTLCBsaWtlZEl0ZW1EYXRhKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgbGlrZSBjb3VudCBieSAxXHJcbiAgICAgICAgICBsaWtlc0NvdW50ICs9IDE7XHJcblxyXG4gICAgICAgICAgLy8gdXBkYXRlIHRoZSBsaWtlIGNvdW50IG9uIHRoZSBzY3JlZW5cclxuICAgICAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZXNDb3VudCA+IDEgPyBgJHtsaWtlc0NvdW50fSBMaWtlc2AgOiBgJHtsaWtlc0NvdW50fSBMaWtlYDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pLnRoZW4oKCkgPT4ge1xyXG4gIC8vIGFkZCByZW5kZXIgY29tbWVudCBwb3AtdXAgaGVyZVxyXG4gIGZldGNoUG9wdXAoKTtcclxufSk7XHJcbiIsImNvbnN0IHJlbW92ZUFjdGl2ZSA9IChhcnIpID0+IHtcbiAgYXJyLmZvckVhY2goKGxpbmspID0+IHtcbiAgICBpZiAobGluay5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVBY3RpdmU7XG4iXSwibmFtZXMiOlsicGFnZUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhlYWRlciIsInBhZ2VNYWluIiwiYXN5bmMiLCJhcnR3b3Jrc0FyciIsImFydHdvcmtzSHRtbENvbnRlbnQiLCJmaWx0ZXIiLCJhcnR3b3JrIiwiaW1hZ2VfaWQiLCJtYXAiLCJpZCIsInRpdGxlIiwiYXJ0aXN0X2Rpc3BsYXkiLCJsaWtlcyIsImluc2VydEFkamFjZW50SFRNTCIsImpvaW4iLCJVUkwiLCJkYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwianNvbiIsInRhcmdldCIsIm91dHB1dCIsImNvdW50IiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJsb2NhdGlvbiIsInBhZ2UiLCJjb250ZW50IiwiaW5uZXJIVE1MIiwibWFpbkNvbnRhaW5lciIsInJlbmRlcmVkTGlzdCIsInRlcm1fdGl0bGVzIiwidGVybSIsInBvcHVwIiwicGxhY2Vfb2Zfb3JpZ2luIiwiY3JlZGl0X2xpbmUiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJ1cmwiLCJ1bEVsZW1lbnQiLCJjb21tZW50Q291bnRlciIsInRoZW4iLCJub0NvbW1lbnQiLCJjb21tZW50IiwiY3JlYXRpb25fZGF0ZSIsInVzZXJuYW1lIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInNwbGl0IiwibW9kYWwiLCJyZW5kZXJNb2RhbCIsImRpc3BsYXllZCIsImNvbnRhaW5lciIsImNsb3NlQnRuIiwiZm9ybVN1Ym1pdCIsIm5hbWUiLCJnZXRFbGVtZW50QnlJZCIsIm1lc3NhZ2UiLCJyZW1vdmVDaGlsZCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJpdGVtX2lkIiwic2V0VGltZW91dCIsInZhbHVlIiwidGFibGlzdCIsIm5hdkl0ZW1zIiwicmVtb3ZlQ2xhc3MiLCJhcnIiLCJsaW5rIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJ0YWIiLCJhZGQiLCJVUkxfQVJUV09SS1MiLCJVUkxfTElLRVMiLCJQcm9taXNlIiwiYWxsIiwiYXJ0d29ya3NEYXRhIiwibGlrZXNEYXRhIiwiYXJ0d29ya3NBbmRMaWtlcyIsImxpa2VzT2JqIiwiZmluZCIsImxpa2UiLCJ0b1N0cmluZyIsImFydHdvcmtzQ291bnQiLCJhcnR3b3JrQ29sbGVjdGlvbiIsImJ0biIsImxpa2VCdG4iLCJwYXJlbnRFbGVtZW50IiwibGlrZUNvdW50ZXIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJsaWtlc0NvdW50IiwicGFyc2VJbnQiLCJsaWtlZEl0ZW1EYXRhIiwiZGF0YXNldCJdLCJzb3VyY2VSb290IjoiIn0=